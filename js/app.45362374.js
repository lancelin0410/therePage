(()=>{"use strict";var e={7050:(e,t,i)=>{i(6992),i(8674),i(9601),i(7727);var n=i(6369),r=function(){var e=this,t=e._self._c;return t("div",{ref:"container",attrs:{id:"app"}},[t("canvas",{ref:"renderCanvas",attrs:{id:"renderCanvas"}})])},s=[],a=(i(7658),i(8309),i(8035)),o=i(4543),h=i(1444),l=i(5461);const c={name:"App",data:function(){return{guiController:{cameraFOV:null},guiInfo:{cameraFOV:110},scene:null,camera:null,sceneOrtho:null,cameraOrtho:null,labels:[],geometry:null,texture:null,material:null,mesh:null,renderer:null,controls:null}},created:function(){},mounted:function(){this.initThree(),this.animate(),this.initGUI()},methods:{initGUI:function(){var e=this,t=new l.XS({name:"threeJS GUI"});this.guiController.cameraFOV=t.add(this.guiInfo,"cameraFOV",10,110,1),this.guiController.cameraFOV.onChange((function(t){e.camera.fov=t,e.camera.updateProjectionMatrix()}))},initThree:function(){this.scene=new a.xsS,this.camera=new a.cPb(110,window.innerWidth/window.innerHeight,1,1100),this.camera.position=new a.Pa4(0,0,1),this.cameraOrtho=new a.iKG(-window.innerWidth/2,window.innerWidth/2,window.innerHeight/2,-window.innerHeight/2,1,10),this.cameraOrtho.position=new a.Pa4(0,0,10),this.sceneOrtho=new a.xsS;for(var e=[{position:{lon:114.12,lat:69.48},logoUrl:"",text:"一片雲彩"}],t=0;t<e.length;t++)this.labels.push(this.createLabelSprite(this.sceneOrtho,e[t].text,e[t].position));this.addSprites();var i=new a.Rki(this.camera);this.scene.add(i);var n=new a.y8_(1100);this.scene.add(n);var r=new a.Rki(this.cameraOrtho);this.scene.add(r),this.geometry=new a.xo$(500,60,40),this.geometry.scale(-1,1,1),this.texture=(new a.dpR).load("https://storage.googleapis.com/map_panorama/demo/pano_road/0/202209/Z111_ROAD_20220919_105547_50.jpg"),this.material=new a.vBJ({map:this.texture}),this.mesh=new a.Kj0(this.geometry,this.material),this.mesh.rotateY(-Math.PI/2),this.scene.add(this.mesh),this.renderer=new a.CP7({canvas:this.$refs.renderCanvas}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.autoClear=!1,this.controls=new o.z(this.camera,this.renderer.domElement),this.controls.update(),this.$refs.container.style.touchAction="none",document.addEventListener("wheel",this.onDocumentMouseWheel),window.addEventListener("resize",this.onWindowResize),this.draw2Line()},createLabelSprite:function(e,t,i){var n=document.createElement("canvas"),r=n.getContext("2d"),s=r.measureText(t),o=1.5*s.width;r.font="14px 微軟正黑體",r.fillStyle="rgba(0,0,0,0.95)",r.fillRect(0,0,o+8,28),r.fillStyle="rgba(0,0,0,0.2)",r.fillRect(2,2,o+4,24),r.fillStyle="rgba(255,255,255,0.95)",r.fillText(t,4,20);var h=new a.xEZ(n);h.needsUpdate=!0;var l=new a.xeV({map:h}),c=new a.jyi(l);c.scale.set(1,1,1),c.position.set(0,0,0),c.name=t;var d={name:t,pos:i,canvas:n,context:r,texture:h,sprite:c};return e.add(d.sprite),d},addSprites:function(){if("undefined"!=typeof _sprites)for(var e=0;e<_sprites.length;e++){var t=this.geoPosition2World(_sprites[e].pos.lon,_sprites[e].pos.lat),i=this.worldPosition2Screen(t,this.camera),n=t.clone();n.project(this.camera),n.x>-1&&n.x<1&&n.y>-1&&n.y<1&&n.z>-1&&n.z<1?(_sprites[e].sprite.scale.set(32,32,32),_sprites[e].sprite.position.set(i.x,i.y,1)):(_sprites[e].sprite.scale.set(1,1,1),_sprites[e].sprite.position.set(0,0,0))}if("undefined"!=typeof this.labels)for(e=0;e<this.labels.length;e++){t=this.geoPosition2World(this.labels[e].pos.lon,this.labels[e].pos.lat),i=this.worldPosition2Screen(t,this.camera),n=t.clone();if(n.project(this.camera),n.x>-1&&n.x<1&&n.y>-1&&n.y<1&&n.z>-1&&n.z<1){var r=this.labels[e].context.measureText(this.labels[e].name),s=3.5*r.width;this.labels[e].sprite.scale.set(400,150,1),this.labels[e].sprite.position.set(i.x+s,i.y-40,1)}else this.labels[e].sprite.scale.set(1,1,1),this.labels[e].sprite.position.set(0,0,0)}},createSprite:function(e,t,i){var n=new a.dpR,r=new a.xeV({map:n.load(t)}),s={pos:e,name:i,sprite:new a.jyi(r)};return s.sprite.scale.set(32,32,1),s.sprite.name=i,this.sceneOrtho.add(s.sprite),s},geoPosition2World:function(e,t){var i=1e3;t=Math.max(-85,Math.min(85,t));var n=a.M8C.degToRad(90-t),r=a.M8C.degToRad(e),s={x:i*Math.sin(n)*Math.cos(r),y:i*Math.cos(n),z:i*Math.sin(n)*Math.sin(r)};return new a.Pa4(s.x,s.y,s.z)},worldPosition2Screen:function(e,t){var i=e.clone();i.project(t);var n={x:Math.round((i.x+1)*window.innerWidth/2-window.innerWidth/2),y:Math.round(window.innerHeight/2-(1-i.y)*window.innerHeight/2),z:0};return new a.Pa4(n.x,n.y,n.z)},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},draw2Line:function(){for(var e=[],t=3*Math.PI/180,i=0;i<=Math.PI;i+=Math.PI/100)i>=Math.PI-t?e.push(new a.Pa4(0,-600*Math.sin(i),-600)):e.push(new a.Pa4(0,-497*Math.sin(i),497*Math.cos(i)));this.drawLine(e,"#03A9F4")},drawLine:function(e,t){var i=(new a.u9r).setFromPoints(e),n=new h.MeshLine;n.setGeometry(i);var r=new h.MeshLineMaterial({map:this.texture,color:t,lineWidth:30,transparent:!0,opacity:.5});r.side=a.ehD;var s=new a.Kj0(n,r);this.scene.add(s)},onDocumentMouseWheel:function(e){var t=this.camera.fov+.05*e.deltaY;this.guiInfo.cameraFOV=this.camera.fov=a.M8C.clamp(t,10,110),this.camera.updateProjectionMatrix(),this.guiController.cameraFOV.updateDisplay()},animate:function(){requestAnimationFrame(this.animate),this.addSprites(),this.controls.update(),this.renderer.render(this.scene,this.camera),this.renderer.render(this.sceneOrtho,this.cameraOrtho)},update:function(){this.lat=Math.max(-85,Math.min(85,this.lat)),this.phi=a.M8C.degToRad(90-this.lat),this.theta=a.M8C.degToRad(this.lon);var e=500*Math.sin(this.phi)*Math.cos(this.theta),t=500*Math.cos(this.phi),i=500*Math.sin(this.phi)*Math.sin(this.theta);this.camera.lookAt(e,t,i),this.renderer.render(this.scene,this.camera),this.renderer.render(this.sceneOrtho,this.cameraOrtho)}}},d=c;var p=i(1001),u=(0,p.Z)(d,r,s,!1,null,null,null);const w=u.exports;n.ZP.config.productionTip=!1,new n.ZP({render:function(e){return e(w)}}).$mount("#app")}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.m=e,(()=>{var e=[];i.O=(t,n,r,s)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,r,s]=e[c],o=!0,h=0;h<n.length;h++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](n[h])))?n.splice(h--,1):(o=!1,s<a&&(a=s));if(o){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,r,s]}})(),(()=>{i.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return i.d(t,{a:t}),t}})(),(()=>{i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[a,o,h]=n,l=0;if(a.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(h)var c=h(i)}for(t&&t(n);l<a.length;l++)s=a[l],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},n=self["webpackChunkthree_test"]=self["webpackChunkthree_test"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=i.O(void 0,[998],(()=>i(7050)));n=i.O(n)})();
//# sourceMappingURL=app.45362374.js.map