{"version":3,"file":"js/app.45362374.js","mappings":"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","sources":["webpack://three_test/./src/App.vue","webpack://three_test/src/App.vue","webpack://three_test/./src/App.vue?51dd","webpack://three_test/./src/App.vue?0e40","webpack://three_test/./src/main.js","webpack://three_test/webpack/bootstrap","webpack://three_test/webpack/runtime/chunk loaded","webpack://three_test/webpack/runtime/compat get default export","webpack://three_test/webpack/runtime/define property getters","webpack://three_test/webpack/runtime/global","webpack://three_test/webpack/runtime/hasOwnProperty shorthand","webpack://three_test/webpack/runtime/jsonp chunk loading","webpack://three_test/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"container\",attrs:{\"id\":\"app\"}},[_c('canvas',{ref:\"renderCanvas\",attrs:{\"id\":\"renderCanvas\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\" ref=\"container\">\n\t\t<canvas id=\"renderCanvas\" ref=\"renderCanvas\" />\n  </div>\n</template>\n\n<script>\nimport * as THREE from 'three';\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from 'three.meshline';\nimport * as dat from 'dat.gui';\n\nexport default {\n  name: 'App',\n\tdata() {\n\t\treturn {\n\t\t\t// isUserInteracting: false,\n\t\t\t// onPointerDownMouseX: 0, \n\t\t\t// onPointerDownMouseY: 0,\n\t\t\t// lon: 0, \n\t\t\t// onPointerDownLon: 0,\n\t\t\t// lat: 0, \n\t\t\t// onPointerDownLat: 0,\n\t\t\t// phi: 0, \n\t\t\t// theta: 0,\n\t\t\tguiController: {\n\t\t\t\tcameraFOV: null\n\t\t\t},\n\t\t\tguiInfo: {\n\t\t\t\tcameraFOV: 110\n\t\t\t},\n\t\t\tscene: null,\n\t\t\tcamera: null,\n\t\t\tsceneOrtho: null,\n\t\t\tcameraOrtho: null,\n\t\t\tlabels: [],\n\t\t\tgeometry: null,\n\t\t\ttexture: null,\n\t\t\tmaterial: null,\n\t\t\tmesh: null,\n\t\t\trenderer: null,\n\t\t\tcontrols: null\n\t\t}\n\t},\n\tcreated() {},\n\tmounted() {\n\t\tthis.initThree();\n\t\tthis.animate();\n\n\t\tthis.initGUI();\n\t},\n\tmethods: {\n\t\tinitGUI() {\n\t\t\tconst gui = new dat.GUI({ name: \"threeJS GUI\" });\n\t\t\tthis.guiController.cameraFOV = gui.add(this.guiInfo, \"cameraFOV\", 10, 110, 1 );\n\n\t\t\tthis.guiController.cameraFOV.onChange(value => {\n\t\t\t\tthis.camera.fov = value;\n\t\t\t\tthis.camera.updateProjectionMatrix();\n\t\t\t});\n\t\t},\n\t\tinitThree() {\n\t\t\t// init scene & camera\n\t\t\tthis.scene = new THREE.Scene();\n\t\t\tthis.camera = new THREE.PerspectiveCamera( 110, window.innerWidth / window.innerHeight, 1, 1100 );\n\t\t\t// this.camera = new THREE.OrthographicCamera( -window.innerWidth/2,  window.innerWidth/2, window.innerHeight/2, -window.innerHeight/2, 1, 1100 );\n\t\t\tthis.camera.position = new THREE.Vector3(0, 0, 1);\n\n\t\t\t//TODO: test\n\t\t\tthis.cameraOrtho = new THREE.OrthographicCamera(-window.innerWidth / 2, window.innerWidth / 2, window.innerHeight / 2, -window.innerHeight / 2, 1, 10);  \n\t\t\tthis.cameraOrtho.position = new THREE.Vector3(0, 0, 10);\n\t\t\tthis.sceneOrtho = new THREE.Scene();\n\n\t\t\tconst _labelsOri =  [\n\t\t\t\t// { position: { lon: -72.00, lat: 9.00 }, logoUrl: '', text: '藍窗戶' },\n\t\t\t\t{ position: { lon: 114.12, lat: 69.48 }, logoUrl: '', text: '一片雲彩' },\n\t\t\t\t// { position: { lon: 132.48, lat: -12.24 }, logoUrl: '', text: '大海' }\n\t\t\t];\n\n\t\t\tfor (var i = 0; i < _labelsOri.length; i++) this.labels.push(this.createLabelSprite(this.sceneOrtho, _labelsOri[i].text, _labelsOri[i].position));\n\n\t\t\tthis.addSprites();\n\n\t\t\t// 半球光\n\t\t\t// let light = new THREE.HemisphereLight(0xffffff);\n\t\t\t// light.position.set(0, 40, 0);\n\t\t\t// this.scene.add(light);\n\t\t\t// let helper = new THREE.HemisphereLightHelper( light, 5 );\n\t\t\t// this.scene.add(helper);\n\n\t\t\t//平行光\n\t\t\t// light = new THREE.DirectionalLight(0xffffff);\n\t\t\t// light.position.set(0, 40, -10);\n\t\t\t// this.scene.add(light);\n\t\t\t// helper = new THREE.DirectionalLightHelper( light, 5 );\n\t\t\t// this.scene.add(helper);\n\n\t\t\t// helper\t\n\t\t\tconst cameraHelper = new THREE.CameraHelper( this.camera );\n\t\t\tthis.scene.add(cameraHelper);\n\t\t\tconst axisHelper = new THREE.AxesHelper(1100);\n\t\t\tthis.scene.add(axisHelper);\n\t\t\tconst cameraOrthoHelper = new THREE.CameraHelper( this.cameraOrtho );\n\t\t\tthis.scene.add(cameraOrthoHelper);\n\n\t\t\t// 建立 球體 & 全景貼圖\n\t\t\tthis.geometry = new THREE.SphereGeometry( 500, 60, 40 );\n\t\t\t// invert the geometry on the x-axis so that all of the faces point inward\n\t\t\tthis.geometry.scale( -1, 1, 1 );\n\t\t\tthis.texture = new THREE.TextureLoader().load('https://storage.googleapis.com/map_panorama/demo/pano_road/0/202209/Z111_ROAD_20220919_105547_50.jpg');\n\t\t\t// this.texture = new THREE.TextureLoader().load('https://storage.googleapis.com/map_panorama/demo/pano_road/7/202008/005200-X-2020071707502152-0001849.jpg');\n\t\t\t// this.texture = new THREE.TextureLoader().load('https://storage.googleapis.com/map_panorama/demo/pano_walk/9/202209/Z111_WALK_20220920_144444_50.jpg');\n\t\t\tthis.material = new THREE.MeshBasicMaterial( { map: this.texture } );\n\t\t\t// this.material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );\n\t\t\tthis.mesh = new THREE.Mesh( this.geometry, this.material );\n\t\t\tthis.mesh.rotateY(-Math.PI/2);\n\t\t\tthis.scene.add( this.mesh );\n\n\t\t\t// init renderer\n\t\t\tthis.renderer = new THREE.WebGLRenderer({ canvas: this.$refs.renderCanvas });\n\t\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\n\t\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight);\n\t\t\tthis.renderer.autoClear = false;\n\n\t\t\tthis.controls = new OrbitControls(this.camera, this.renderer.domElement);\n\t\t\t// this.controls.enableZoom = true; //啟用縮放\n\t\t\t// this.controls.enableDamping = true; // 啟用阻尼效果\n\t\t\t// this.controls.dampingFactor = 0.25; // 阻尼系數\n\t\t\t// this.controls.autoRotate = true; //啟用自動旋轉\n\t\t\t// this.controls.target.set(-500, 0, 0);\n\t\t\t// this.controls.minDistance = 0; \n\t\t\t// this.controls.maxDistance = 1;\n\t\t\tthis.controls.update();\n\n\t\t\t// 監聽\n\t\t\tthis.$refs.container.style.touchAction = 'none';\n\t\t\t// this.$refs.container.addEventListener( 'pointerdown', this.onPointerDown );\n\t\t\tdocument.addEventListener( 'wheel', this.onDocumentMouseWheel );\n\t\t\t// document.addEventListener( 'dragover', event => {\n\t\t\t// \tevent.preventDefault();\n\t\t\t// \tevent.dataTransfer.dropEffect = 'copy';\n\t\t\t// });\n\n\t\t\t// document.addEventListener( 'dragenter', () => { document.body.style.opacity = 0.5; });\n\t\t\t// document.addEventListener( 'dragleave', () => { document.body.style.opacity = 1; });\n\t\t\t// document.addEventListener( 'drop', event => {\n\t\t\t// \tevent.preventDefault();\n\n\t\t\t// \tconst reader = new FileReader();\n\t\t\t// \treader.addEventListener( 'load', event => {\n\t\t\t// \t\tmaterial.map.image.src = event.target.result;\n\t\t\t// \t\tmaterial.map.needsUpdate = true;\n\t\t\t// \t} );\n\n\t\t\t// \treader.readAsDataURL( event.dataTransfer.files[ 0 ] );\n\t\t\t// \tdocument.body.style.opacity = 1;\n\t\t\t// } );\n\n\t\t\twindow.addEventListener( 'resize', this.onWindowResize );\n\t\t\tthis.draw2Line();\n\t\t},\n\t\t// 创建文字标记\n\t\tcreateLabelSprite(sceneOrtho, name, position) {\n\t\t\tconst canvas1 = document.createElement('canvas');\n\t\t\tconst context1 = canvas1.getContext('2d');\n\t\t\tconst metrics = context1.measureText(name);\n\t\t\tconst width = metrics.width * 1.5;\n\t\t\tcontext1.font = \"14px 微軟正黑體\";\n\t\t\tcontext1.fillStyle = \"rgba(0,0,0,0.95)\";\n\t\t\tcontext1.fillRect(0, 0, width + 8, 20 + 8);\n\t\t\tcontext1.fillStyle = \"rgba(0,0,0,0.2)\";\n\t\t\tcontext1.fillRect(2, 2, width + 4, 20 + 4);\n\t\t\tcontext1.fillStyle = \"rgba(255,255,255,0.95)\";\n\t\t\tcontext1.fillText(name, 4, 20);\n\t\t\tconst texture1 = new THREE.Texture(canvas1);\n\t\t\ttexture1.needsUpdate = true;\n\t\t\tconst spriteMaterial = new THREE.SpriteMaterial({ map: texture1 });\n\t\t\tconst sprite1 = new THREE.Sprite(spriteMaterial);\n\t\t\tsprite1.scale.set(1.0, 1.0, 1.0);\n\t\t\tsprite1.position.set(0, 0, 0);\n\t\t\tsprite1.name = name;\n\t\t\tconst label = {\n\t\t\t\tname: name,\n\t\t\t\tpos: position,\n\t\t\t\tcanvas: canvas1,\n\t\t\t\tcontext: context1,\n\t\t\t\ttexture: texture1,\n\t\t\t\tsprite: sprite1\n\t\t\t};\n\t\t\tsceneOrtho.add(label.sprite);\n\t\t\treturn label;\n\t\t},\n\t\taddSprites() {\n\t\t\tif (typeof (_sprites) != \"undefined\") {\n\t\t\t\tfor (var i = 0; i < _sprites.length; i++) {\n\t\t\t\t\tvar wp = this.geoPosition2World(_sprites[i].pos.lon, _sprites[i].pos.lat);\n\t\t\t\t\tvar sp = this.worldPosition2Screen(wp, this.camera);\n\t\t\t\t\tvar test = wp.clone();\n\t\t\t\t\ttest.project(this.camera);\n\t\t\t\t\tif (test.x > -1 && test.x < 1 && test.y > -1 && test.y < 1 && test.z > -1 && test.z < 1) {\n\t\t\t\t\t\t_sprites[i].sprite.scale.set(32, 32, 32);\n\t\t\t\t\t\t_sprites[i].sprite.position.set(sp.x, sp.y, 1);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t_sprites[i].sprite.scale.set(1.0, 1.0, 1.0);\n\t\t\t\t\t\t_sprites[i].sprite.position.set(0, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof (this.labels) != \"undefined\") {\n\t\t\t\tfor (var i = 0; i < this.labels.length; i++) {\n\t\t\t\t\tvar wp = this.geoPosition2World(this.labels[i].pos.lon, this.labels[i].pos.lat);\n\t\t\t\t\tvar sp = this.worldPosition2Screen(wp, this.camera);\n\t\t\t\t\tvar test = wp.clone();\n\t\t\t\t\ttest.project(this.camera);\n\t\t\t\t\tif (test.x > -1 && test.x < 1 && test.y > -1 && test.y < 1 && test.z > -1 && test.z < 1) {\n\t\t\t\t\t\tvar metrics = this.labels[i].context.measureText(this.labels[i].name);\n\t\t\t\t\t\tvar width = metrics.width * 3.5;\n\t\t\t\t\t\tthis.labels[i].sprite.scale.set(400, 150, 1.0);\n\t\t\t\t\t\tthis.labels[i].sprite.position.set(sp.x + width, sp.y - 40, 1);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.labels[i].sprite.scale.set(1.0, 1.0, 1.0);\n\t\t\t\t\t\tthis.labels[i].sprite.position.set(0, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 创建图片标记\n\t\tcreateSprite(position, url, name) {  \n\t\t\tconst textureLoader = new THREE.TextureLoader();  \n\t\t\tconst ballMaterial = new THREE.SpriteMaterial({ map: textureLoader.load(url)  });  \n\t\t\tconst sp = {    \n\t\t\t\tpos: position,    \n\t\t\t\tname: name,    \n\t\t\t\tsprite: new THREE.Sprite(ballMaterial)  \n\t\t\t};  \n\t\t\tsp.sprite.scale.set(32, 32, 1.0);  \n\t\t\tsp.sprite.name = name;  \n\t\t\tthis.sceneOrtho.add(sp.sprite);  \n\t\t\treturn sp;\n\t\t},\n\t\tgeoPosition2World(lon, lat) {\n\t\t\tconst _pRadius = 1000;\n\t\t\tlat = Math.max(-85, Math.min(85, lat));\n\t\t\tconst phi = THREE.MathUtils.degToRad(90 - lat);\n\t\t\tconst theta = THREE.MathUtils.degToRad(lon);\n\n\t\t\tconst result = {\n\t\t\t\tx: _pRadius * Math.sin(phi) * Math.cos(theta),\n\t\t\t\ty: _pRadius * Math.cos(phi),\n\t\t\t\tz: _pRadius * Math.sin(phi) * Math.sin(theta)\n\t\t\t}\n\t\t\treturn new THREE.Vector3(result.x, result.y, result.z);\n\t\t},\n\t\tworldPosition2Screen(world_vector, camera) {\n\t\t\tconst vector = world_vector.clone();\n\t\t\tvector.project(camera);\n\t\t\tconst result = {\n\t\t\t\tx: Math.round((vector.x + 1) * window.innerWidth / 2 - window.innerWidth / 2),\n\t\t\t\ty: Math.round(window.innerHeight / 2 - (-vector.y + 1) * window.innerHeight / 2),\n\t\t\t\tz: 0\n\t\t\t};\n\t\t\treturn new THREE.Vector3(result.x, result.y, result.z);\n\t\t},\n\t\tonWindowResize() {\n\t\t\tthis.camera.aspect = window.innerWidth / window.innerHeight;\n\t\t\tthis.camera.updateProjectionMatrix();\n\t\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\n\t\t},\n\t\tdraw2Line() {\n\t\t\tlet points = [];\n\t\t\tconst limit = 3 * Math.PI / 180;\n\t\t\t// const limit = 0;\n\t\t\tfor (let j = 0; j <= Math.PI; j += Math.PI / 100) {\n\t\t\t// for (let j = 0 + limit; j <= Math.PI - limit; j += Math.PI / 100) {\n\t\t\t\t// if(j <= limit) points.push(new THREE.Vector3(0, -600 * Math.sin(j), 600));\n\t\t\t\t// else \n\t\t\t\tif (j >= Math.PI - limit) points.push(new THREE.Vector3(0, -600 * Math.sin(j), -600));\n\t\t\t\telse points.push(new THREE.Vector3(0, -497 * Math.sin(j), 497 * Math.cos(j)));\n\t\t\t}\n\n\t\t\tthis.drawLine(points, '#03A9F4');\n\n\t\t\t// const points2 = [\n\t\t\t// \tnew THREE.Vector3(0, -100, 500),\n\t\t\t// \tnew THREE.Vector3(0, -100, -500)\n\t\t\t// ];\n\n\t\t\t// this.drawLine(points2, '#FF9800');\n\n\t\t\t// const spherical = new THREE.Spherical(500);\n\t\t\t// const line2 = new THREE.Vector3(0, 0, -500).sub(new THREE.Vector3(0, 0, 500));\n\t\t\t// const line2Pos = this.worldPosition2Screen(line2, this.camera);\n\t\t\t// line2.project(this.camera);\n\t\t\t// console.log(line2);\n\t\t\t// console.log(line2.setFromSpherical(spherical));\n\n\t\t},\n\t\tdrawLine(points, color) {\n\t\t\tconst geometry = new THREE.BufferGeometry().setFromPoints(points);\n\t\t\t// geometry.rotateZ( 35 * Math.PI / 180);\n\t\t\tconst line = new MeshLine();\n\t\t\tline.setGeometry(geometry);\n\n\t\t\tconst material = new MeshLineMaterial({ map: this.texture, color: color, lineWidth: 30, transparent: true, opacity: 0.5 } );\n\t\t\tmaterial.side = THREE.DoubleSide;\n\n\t\t\tconst mesh = new THREE.Mesh(line, material);\n\t\t\tthis.scene.add(mesh);\n\n\t\t},\n\t\t// onPointerDown(event) {\n\t\t// \tif ( event.isPrimary === false ) return;\n\t\t// \tthis.isUserInteracting = true;\n\t\t// \tthis.onPointerDownMouseX = event.clientX;\n\t\t// \tthis.onPointerDownMouseY = event.clientY;\n\t\t// \tthis.onPointerDownLon = this.lon;\n\t\t// \tthis.onPointerDownLat = this.lat;\n\n\t\t// \tdocument.addEventListener( 'pointermove', this.onPointerMove );\n\t\t// \tdocument.addEventListener( 'pointerup', this.onPointerUp );\n\t\t// },\n\t\t// onPointerMove(event) {\n\t\t// \tif ( event.isPrimary === false ) return;\n\n\t\t// \tthis.lon = ( this.onPointerDownMouseX - event.clientX ) * 0.1 + this.onPointerDownLon;\n\t\t// \tthis.lat = ( event.clientY - this.onPointerDownMouseY ) * 0.1 + this.onPointerDownLat;\n\t\t// },\n\t\t// onPointerUp(event) {\n\t\t// \tif ( event.isPrimary === false ) return;\n\t\t// \tthis.isUserInteracting = false;\n\n\t\t// \tdocument.removeEventListener( 'pointermove', this.onPointerMove );\n\t\t// \tdocument.removeEventListener( 'pointerup', this.onPointerUp );\n\n\t\t// },\n\t\tonDocumentMouseWheel(event) {\n\t\t\tconst fov = this.camera.fov + event.deltaY * 0.05;\n\t\t\tthis.guiInfo.cameraFOV = this.camera.fov = THREE.MathUtils.clamp( fov, 10, 110 );\n\t\t\tthis.camera.updateProjectionMatrix();\n\t\t\tthis.guiController.cameraFOV.updateDisplay() \n\t\t},\n\t\tanimate() {\n\t\t\trequestAnimationFrame( this.animate );\n\n\t\t\t// this.update();\n\n\t\t\tthis.addSprites();\n\t\t\tthis.controls.update();\n\t\t\tthis.renderer.render( this.scene, this.camera );\n\t\t\tthis.renderer.render( this.sceneOrtho, this.cameraOrtho );\n\t\t},\n\t\tupdate() {\n\t\t\tthis.lat = Math.max( - 85, Math.min( 85, this.lat ) );\n\t\t\tthis.phi = THREE.MathUtils.degToRad( 90 - this.lat );\n\t\t\tthis.theta = THREE.MathUtils.degToRad( this.lon );\n\n\t\t\tconst x = 500 * Math.sin( this.phi ) * Math.cos( this.theta );\n\t\t\tconst y = 500 * Math.cos( this.phi );\n\t\t\tconst z = 500 * Math.sin( this.phi ) * Math.sin( this.theta );\n\n\t\t\tthis.camera.lookAt( x, y, z );\n\t\t\tthis.renderer.render( this.scene, this.camera );\n\t\t\tthis.renderer.render( this.sceneOrtho, this.cameraOrtho );\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"sass\">\n#app \n\tfont-family: Avenir, Helvetica, Arial, sans-serif\n\t-webkit-font-smoothing: antialiased\n\t-moz-osx-font-smoothing: grayscale\n\ttext-align: center\n\tcolor: #2c3e50\n\tmargin-top: 60px\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1118b203&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=1118b203&prod&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkthree_test\"] = self[\"webpackChunkthree_test\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], () => (__webpack_require__(7050)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","ref","attrs","staticRenderFns","name","data","guiController","cameraFOV","guiInfo","scene","camera","sceneOrtho","cameraOrtho","labels","geometry","texture","material","mesh","renderer","controls","created","mounted","methods","initGUI","initThree","position","lon","lat","logoUrl","text","map","canvas","document","window","createLabelSprite","context1","texture1","sprite1","pos","context","sprite","addSprites","test","_sprites","createSprite","url","sp","geoPosition2World","x","y","z","worldPosition2Screen","world_vector","vector","onWindowResize","draw2Line","points","drawLine","color","line","lineWidth","transparent","opacity","onDocumentMouseWheel","event","animate","requestAnimationFrame","update","component","Vue","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}